<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dum-E: Voice-Guided Collaborative Robot</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <h1><i class="fas fa-robot"></i> Dum-E</h1>
        <p>Voice-Guided Collaborative Robot for Handover in Sequential Tasks</p>
    </header>

    <main class="container">
        <!-- Left Column: Voice & Config -->
        <div class="left-panel" style="display: flex; flex-direction: column; gap: 2rem;">
            <!-- Audio Recording Section -->
            <section class="card" id="audio-recording" style="border-left: 5px solid #007bff;">
                <div class="card-header">
                    <h2><i class="fas fa-microphone"></i> Voice Command</h2>
                    <span class="info-tooltip" title="Record a voice command to control the robot directly.">?</span>
                </div>
                <div class="card-body" style="text-align: center; padding: 2rem;">
                    <p style="margin-bottom: 1.5rem; color: #666; font-size: 1.1em;">
                        Use your voice to command the robot. Press record, speak your instruction, and stop to save.
                    </p>
                    <div class="audio-controls" style="display: flex; justify-content: center; gap: 20px; margin-bottom: 1rem;">
                        <button id="record-btn" class="btn primary large" style="min-width: 150px;">
                            <i class="fas fa-microphone"></i> Record
                        </button>
                        <button id="stop-record-btn" class="btn danger large" style="min-width: 150px;" disabled>
                            <i class="fas fa-stop"></i> Stop
                        </button>
                    </div>
                    <div id="recording-status" class="status-text" style="font-weight: bold; margin-bottom: 1rem;">Ready to record</div>
                    <audio id="audio-playback" controls style="display:none; margin: 10px auto; width: 80%; max-width: 500px;"></audio>
                </div>
            </section>

            <!-- File I/O Section (Moved & Compacted) -->
            <section class="card" id="file-io">
                <div class="card-header">
                    <h2><i class="fas fa-file-code"></i> Configuration</h2>
                </div>
                <div class="card-body">
                    <div class="io-controls" style="display: flex; flex-direction: column; gap: 10px;">
                        <button id="export-btn" class="btn outline" style="width: 100%;">Export to JSON</button>
                        <label for="import-file" class="btn outline" style="width: 100%; text-align: center; cursor: pointer;">Import JSON File</label>
                        <input type="file" id="import-file" accept=".json,.yml,.yaml" hidden>
                    </div>
                    <textarea id="config-output" placeholder="Config preview..." readonly style="width: 100%; margin-top: 1rem; height: 100px; resize: vertical; font-family: monospace; font-size: 0.8rem;"></textarea>
                </div>
            </section>
        </div>

        <!-- Right Column: Manual Sequence Planning -->
        <div class="right-panel" style="display: flex; flex-direction: column; gap: 2rem;">
            <!-- Tool Management Section -->
            <section class="card" id="tool-management">
                <div class="card-header">
                    <h2><i class="fas fa-tools"></i> Available Tools</h2>
                    <span class="info-tooltip" title="Define the list of tools the robot can recognize.">?</span>
                </div>
                <div class="card-body">
                    <div class="input-group">
                        <input type="text" id="new-tool-name" placeholder="Enter tool name">
                        <button id="add-tool-btn" class="btn primary">Add Tool</button>
                    </div>
                    <ul id="tool-list" class="list-group">
                        <!-- Tools will be populated here -->
                    </ul>
                </div>
            </section>

            <!-- Sequence Builder Section -->
            <section class="card" id="sequence-builder">
                <div class="card-header">
                    <h2><i class="fas fa-layer-group"></i> Operation Sequence</h2>
                    <span class="info-tooltip" title="Drag and drop tools to reorder. Set the 'Ready Time' relative to the start.">?</span>
                </div>
                <div class="card-body">
                    <div class="sequence-controls">
                        <select id="tool-selector">
                            <option value="" disabled selected>Select a tool to add...</option>
                        </select>
                        <button id="add-to-sequence-btn" class="btn secondary">Add to Sequence</button>
                    </div>
                    
                    <div id="sequence-list" class="sequence-list">
                        <!-- Sequence items will be populated here -->
                        <div class="empty-state">No steps in sequence yet. Add a tool to start.</div>
                    </div>

                    <div class="action-bar">
                        <button id="start-sequence-btn" class="btn success large">
                            <i class="fas fa-play"></i> Start Sequence
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>
